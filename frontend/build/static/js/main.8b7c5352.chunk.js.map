{"version":3,"sources":["context/AuthContext.js","components/Header.js","components/Login.js","components/Register.js","pages/Landing.js","pages/Todo.js","utils/ProtectedRoute.js","App.js","index.js"],"names":["AuthContext","createContext","AuthProvider","children","useState","localStorage","getItem","JSON","parse","tokens","setTokens","user","setUser","loading","setLoading","navigate","useNavigate","loginUser","e","a","preventDefault","fetch","method","headers","body","stringify","username","target","value","password","response","json","data","status","access","access_token","refresh","refresh_token","setItem","alert","logoutUser","removeItem","registerUser","currentTarget","confirm","console","log","password1","password2","message","join","updateToken","useEffect","interval","setInterval","clearInterval","contextData","Provider","Header","useContext","className","to","onClick","Login","handleRegisterClick","onSubmit","type","name","placeholder","Register","Landing","login","setLogin","Todo","todoList","activeItem","pk","id","title","completed","editing","state","setState","fetchTasks","Authorization","url","csrftoken","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","getCookie","submitTask","style","flex","onChange","map","task","completeTask","handleCompleted","startEdit","deleteTask","handleDelete","ProtectedRoute","redirect","App","element","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8b7c5352.chunk.js","sourcesContent":["import { createContext, useState, useEffect } from \"react\";\n// Router\nimport { useNavigate } from \"react-router\";\n\nconst AuthContext = createContext();\nexport default AuthContext;\n\nexport const AuthProvider = ({ children }) => {\n  let [tokens, setTokens] = useState(() =>\n    localStorage.getItem(\"authTokens\")\n      ? JSON.parse(localStorage.getItem(\"authTokens\"))\n      : null\n  );\n  let [user, setUser] = useState(() =>\n    localStorage.getItem(\"authTokens\")\n      ? JSON.parse(localStorage.getItem(\"authTokens\")).user\n      : null\n  );\n\n  let [loading, setLoading] = useState(true);\n\n  const navigate = useNavigate();\n\n  let loginUser = async (e) => {\n    e.preventDefault();\n    let response = await fetch(\"http://127.0.0.1:8000/api/auth/login/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        username: e.target.username.value,\n        password: e.target.password.value,\n      }),\n    });\n    let data = await response.json();\n\n    // Status 200 === \"OK\"\n    if (response.status === 200) {\n      let tokens = {\n        access: data.access_token,\n        refresh: data.refresh_token,\n        user: data.user,\n      };\n      setTokens(tokens);\n      setUser(data.user);\n      localStorage.setItem(\"authTokens\", JSON.stringify(tokens));\n      navigate(\"/\");\n    } else {\n      alert(\"Login error!\");\n    }\n  };\n\n  let logoutUser = () => {\n    setTokens(null);\n    setUser(null);\n    localStorage.removeItem(\"authTokens\");\n  };\n\n  let registerUser = async (e) => {\n    e.preventDefault();\n    let username = e.currentTarget.username.value;\n    let password = e.currentTarget.password.value;\n    let confirm = e.currentTarget.confirm.value;\n\n    if (password !== confirm) {\n      alert(\"Passwords do not match!\");\n    } else if (password < 8) {\n      alert(\n        \"This password is too short. It must contain at least 8 characters.\"\n      );\n    } else {\n      console.log(\"Registering new user!\");\n      let response = await fetch(\"http://127.0.0.1:8000/api/auth/register/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          username: username,\n          password1: password,\n          password2: confirm,\n        }),\n      });\n\n      let data = await response.json();\n      // If a registration error occurs\n      if (!data.user) {\n        if (data.username) alert(`${data.username[0]}`);\n        else if (data.password1) {\n          let message = data.password1.join(\" \");\n          alert(`${message}`);\n        }\n      }\n      // Otherwise, login the newly registered user\n      else {\n        let tokens = {\n          access: data.access_token,\n          refresh: data.refresh_token,\n          user: data.user,\n        };\n        setTokens(tokens);\n        setUser(data.user);\n        localStorage.setItem(\"authTokens\", JSON.stringify(tokens));\n        navigate(\"/\");\n      }\n    }\n    e.target.password.value = \"\";\n    e.target.confirm.value = \"\";\n  };\n\n  let updateToken = async () => {\n    if (!user) return setLoading(false);\n    console.log(\"Updating token!\");\n    let response = await fetch(\n      \"http://127.0.0.1:8000/api/auth/token/refresh/\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ refresh: tokens?.refresh }),\n      }\n    );\n    let data = await response.json();\n    if (response.status === 200) {\n      console.log(\"Token refreshed!\");\n      setTokens({ ...tokens, access: data.access });\n      localStorage.setItem(\n        \"authTokens\",\n        JSON.stringify({ ...tokens, access: data.access })\n      );\n    } else logoutUser();\n\n    if (loading) {\n      console.log(\"Set loading to false\");\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (loading) {\n      updateToken();\n    }\n    let minutes = 1000 * 60 * 4;\n    console.log(\"Four minutes\");\n    let interval = setInterval(() => {\n      if (tokens) {\n        updateToken();\n      }\n    }, minutes);\n    return () => {\n      console.log(\"Clearing interval\");\n      clearInterval(interval);\n    };\n  }, [tokens, loading]);\n\n  let contextData = {\n    user: user,\n    tokens: tokens,\n    loginUser: loginUser,\n    logoutUser: logoutUser,\n    registerUser: registerUser,\n  };\n\n  return (\n    <AuthContext.Provider value={contextData}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n};\n","import React, { useContext } from \"react\";\n// Context\nimport AuthContext from \"../context/AuthContext\";\n// CSS\nimport \"./Header.css\";\n// Router\nimport { Link } from \"react-router-dom\";\n\nconst Header = () => {\n  let { user, logoutUser } = useContext(AuthContext);\n  return (\n    <div className=\"header-container\">\n      <span className=\"logo\">ToDO</span>\n      <div>\n        <Link className=\"mr-4\" to=\"/\">\n          Home\n        </Link>\n        {user ? (\n          <Link to=\"/login\" onClick={logoutUser}>\n            Hello, {user.username} - Logout\n          </Link>\n        ) : (\n          <Link to=\"/login\">Login</Link>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React, { useContext } from \"react\";\n\n// Context\nimport AuthContext from \"../context/AuthContext\";\n\nconst Login = ({ handleRegisterClick }) => {\n  const { loginUser } = useContext(AuthContext);\n  return (\n    <div className=\"todo-container\">\n      <h5>LOG IN</h5>\n      <form onSubmit={loginUser}>\n        <div className=\"username\">\n          <input\n            className=\"form-control\"\n            type=\"text\"\n            name=\"username\"\n            placeholder=\"Username\"\n          />\n        </div>\n        <div className=\"password\">\n          <input\n            className=\"form-control\"\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Password\"\n          />\n        </div>\n        <div className=\"login\">\n          <input className=\"btn btn-success\" type=\"submit\" value=\"Login\" />\n        </div>\n        <div className=\"register\">\n          <button className=\"btn btn-primary\" onClick={handleRegisterClick}>\n            Register\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useContext } from \"react\";\nimport AuthContext from \"../context/AuthContext\";\n\nconst Register = ({ handleRegisterClick }) => {\n  let { registerUser } = useContext(AuthContext);\n\n  return (\n    <>\n      <div className=\"todo-container\">\n        <h5>REGISTER</h5>\n        <form onSubmit={registerUser}>\n          <div className=\"username\">\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"Username\"\n            />\n          </div>\n          <div className=\"password\">\n            <input\n              className=\"form-control\"\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"Password\"\n            />\n          </div>\n          <div className=\"password\">\n            <input\n              className=\"form-control\"\n              type=\"password\"\n              name=\"confirm\"\n              placeholder=\"Confirm\"\n            />\n          </div>\n          <div className=\"submit\">\n            <input className=\"btn btn-primary\" type=\"submit\" value=\"Submit\" />\n          </div>\n          <div className=\"login\">\n            <button className=\"btn btn-danger\" onClick={handleRegisterClick}>\n              Back\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default Register;\n","import React, { useState } from \"react\";\nimport Header from \"../components/Header\";\nimport Login from \"../components/Login\";\nimport Register from \"../components/Register\";\n// CSS\nimport \"./Landing.css\";\n\nconst Landing = () => {\n  let [login, setLogin] = useState(true);\n\n  const handleRegisterClick = (e) => {\n    e.preventDefault();\n    setLogin(!login);\n  };\n\n  return (\n    <>\n      <Header />\n      {login && <Login handleRegisterClick={handleRegisterClick} />}\n      {!login && <Register handleRegisterClick={handleRegisterClick} />}\n    </>\n  );\n};\n\nexport default Landing;\n","import React, { useState, useEffect, useContext } from \"react\";\n\n// Components\nimport Header from \"../components/Header\";\n\n// Context\nimport AuthContext from \"../context/AuthContext\";\n\nconst Todo = () => {\n  let { user, tokens } = useContext(AuthContext);\n  const [state, setState] = useState({\n    todoList: [],\n    activeItem: {\n      user: user.pk,\n      id: null,\n      title: \"\",\n      completed: false,\n    },\n    editing: false,\n  });\n\n  const handleFormInput = (e) => {\n    // let name = e.target.name;\n    let value = e.target.value;\n    setState({\n      ...state,\n      activeItem: { ...state.activeItem, title: value },\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    var url = \"http://127.0.0.1:8000/api/task-create/\";\n    if (state.editing === true) {\n      url = `http://127.0.0.1:8000/api/task-update/${state.activeItem.id}/`;\n    }\n    const csrftoken = getCookie(\"csrftoken\");\n    async function submitTask() {\n      try {\n        await fetch(url, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${tokens.access}`,\n            \"X-CSRFToken\": csrftoken,\n          },\n          body: JSON.stringify(state.activeItem),\n        });\n        setState({\n          ...state,\n          editing: false,\n        });\n        fetchTasks();\n      } catch {\n        console.log(\"ERROR!\");\n      }\n    }\n    submitTask();\n  };\n\n  const startEdit = (task) => {\n    setState({ ...state, activeItem: task, editing: true });\n  };\n\n  const handleDelete = (id) => {\n    const deleteTask = async () => {\n      try {\n        await fetch(`http://127.0.0.1:8000/api/task-delete/${id}/`, {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${tokens.access}`,\n          },\n        });\n        fetchTasks();\n      } catch {\n        console.log(\"ERROR!\");\n      }\n    };\n    deleteTask();\n  };\n\n  const handleCompleted = (task) => {\n    task.completed = !task.completed;\n    const completeTask = async () => {\n      let response = await fetch(\n        `http://127.0.0.1:8000/api/task-update/${task.id}/`,\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${tokens.access}`,\n          },\n          body: JSON.stringify(task),\n        }\n      );\n      if (response.status === 200) {\n        fetchTasks();\n      } else {\n        console.log(\"ERROR updating task completion!\");\n      }\n    };\n    completeTask();\n  };\n\n  async function fetchTasks() {\n    let response = await fetch(`http://127.0.0.1:8000/api/task-list/`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${tokens.access}`,\n      },\n    });\n\n    let data = await response.json();\n\n    if (response.status === 200) {\n      setState({\n        todoList: data,\n        // Reset the activeItem object\n        activeItem: {\n          user: user.pk,\n          id: null,\n          title: \"\",\n          completed: false,\n        },\n        editing: false,\n      });\n    }\n  }\n\n  function getCookie(name) {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== \"\") {\n      const cookies = document.cookie.split(\";\");\n      for (let i = 0; i < cookies.length; i++) {\n        const cookie = cookies[i].trim();\n        // Does this cookie string begin with the name we want?\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n    return cookieValue;\n  }\n\n  useEffect(() => {\n    if (state.editing === false) fetchTasks();\n  }, [state.editing]);\n\n  return (\n    <>\n      <Header />\n      <div className=\"container\">\n        <div className=\"task-container\">\n          <div id=\"form-wrapper\">\n            <form id=\"form\" onSubmit={handleSubmit}>\n              <div className=\"flex-wrapper\">\n                <div style={{ flex: 6 }}>\n                  <input\n                    className=\"form-control\"\n                    id=\"title\"\n                    name=\"title\"\n                    onChange={handleFormInput}\n                    placeholder=\"Title\"\n                    type=\"text\"\n                    value={state.activeItem.title}\n                  />\n                </div>\n                <div style={{ flex: 1 }}>\n                  <input\n                    className=\"btn btn-warning\"\n                    id=\"submit\"\n                    name=\"Add\"\n                    type=\"submit\"\n                  />\n                </div>\n              </div>\n            </form>\n            <div className=\"list-wrapper\">\n              {state.todoList.length > 0 &&\n                state.todoList.map((task) => (\n                  <div key={task.id} className=\"task-wrapper\">\n                    <div\n                      className={task.completed ? \"completed\" : null}\n                      style={{ flex: 7 }}\n                      onClick={() => handleCompleted(task)}\n                    >\n                      {task.title}\n                    </div>\n                    <div style={{ flex: 1 }}>\n                      <button\n                        className=\"btn btn-success\"\n                        onClick={() => startEdit(task)}\n                      >\n                        Edit\n                      </button>\n                    </div>\n                    <div style={{ flex: 1 }}>\n                      <button\n                        className=\"btn btn-danger\"\n                        onClick={() => handleDelete(task.id)}\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                ))}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Todo;\n","import { useContext } from \"react\";\n// Context\nimport AuthContext from \"../context/AuthContext\";\n// Router\nimport { Navigate } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ children, redirect }) => {\n  let { user } = useContext(AuthContext);\n  return !user ? <Navigate to={redirect} /> : children;\n};\n\nexport default ProtectedRoute;\n","import \"./App.css\";\n// Context\nimport { AuthProvider } from \"./context/AuthContext\";\n// Pages\nimport Landing from \"./pages/Landing\";\nimport Todo from \"./pages/Todo\";\n// Router\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\n// Utils\nimport ProtectedRoute from \"./utils/ProtectedRoute\";\n\nfunction App() {\n  return (\n    <>\n      <Router>\n        <AuthProvider>\n          <Routes>\n            <Route element={<Landing />} path=\"/login\" />\n            <Route\n              element={\n                <ProtectedRoute redirect=\"/login\">\n                  <Todo />\n                </ProtectedRoute>\n              }\n              path=\"\"\n            />\n          </Routes>\n        </AuthProvider>\n      </Router>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}